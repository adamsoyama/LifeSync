import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as l,C as u,M as y,i as p,a as g,b as E}from"./services-DSB0CCEI.js";const h="https://api.apilayer.com/fixer/latest",k="https://api.marketstack.com/v1/eod";async function x(e){var o;const t=`${h}?base=USD&symbols=${e}`,c=await l(t,{headers:{apikey:u}});return(o=c==null?void 0:c.rates)!=null&&o[e]?c.rates[e]:(console.warn("Fallback to 1.0 rate"),1)}async function f(e){var c;const t=`${k}?access_key=${y}&symbols=${e}`,n=await l(t);if(((c=n==null?void 0:n.data)==null?void 0:c.length)>0){const o=n.data[0];return{symbol:o.symbol,price:o.close,date:o.date}}return{symbol:e,price:"Unavailable",date:"",fallback:!0}}const I=document.getElementById("total-income"),T=document.getElementById("total-expenses"),b=document.getElementById("current-balance"),v=document.getElementById("usd-amount"),$=document.getElementById("currency-select"),B=document.getElementById("convert-currency"),r=document.getElementById("exchange-rate"),S=document.getElementById("converted-amount"),C=document.getElementById("stock-symbol"),D=document.getElementById("fetch-stock"),a=document.getElementById("stock-price"),A=document.getElementById("market-cap"),F=document.getElementById("stock-history"),i=document.getElementById("dashboard-finance-summary");function s(){if(!i)return;const e={income:I.innerText,expenses:T.innerText,balance:b.innerText,exchangeRate:r.innerText,stockPrice:a.innerText};i.innerHTML=`
    <h3>Finance Overview</h3>
    <p><strong>Total Income:</strong> ${e.income}</p>
    <p><strong>Total Expenses:</strong> ${e.expenses}</p>
    <p><strong>Current Balance:</strong> ${e.balance}</p>
    <p><strong>Latest Exchange Rate:</strong> ${e.exchangeRate}</p>
    <p><strong>Latest Stock Price:</strong> ${e.stockPrice}</p>
  `}async function d(){try{r.innerText="Fetching rates...";const e=$.value,t=parseFloat(v.value)||0,n=await x(e);if(!n||isNaN(n)){r.innerText="Error fetching data!";return}r.innerText=`1 USD = ${n.toFixed(2)} ${e}`,S.innerText=`${(t*n).toFixed(2)} ${e}`,s()}catch(e){console.error("❌ Currency Conversion Error:",e),r.innerText="Conversion failed!"}}async function m(){try{a.innerText="Fetching stock data...";const e=C.value.toUpperCase();if(!e){a.innerText="Enter a valid stock symbol!";return}const t=await f(e);if(t.fallback||!t.price){a.innerText="Stock data unavailable!";return}a.innerText=`${e}: $${t.price}`,A.innerText="N/A",F.innerHTML=`
      <li>Date: ${new Date(t.date).toLocaleDateString()}</li>
      <li>Close Price: $${t.price}</li>
    `,s()}catch(e){console.error("❌ Stock Fetch Error:",e),a.innerText="Stock fetch failed!"}}B.addEventListener("click",d);D.addEventListener("click",m);setInterval(()=>{d(),m(),s()},18e5);document.addEventListener("DOMContentLoaded",()=>{p(),g(),E(),s()});
